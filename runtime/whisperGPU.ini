[ASR]
# Speech Recognition engine
Engine=whisper


[Whisper]
Backend=gpu

# CUDA build tag / version
Cuda=cu128

# Force recognition language. Default set by detected game client language. If wrong uncomment Model and manually set.
# Example: ru, en, de, fr, etc.
#Language=en

# Whisper model size (default: tiny, uncomment to set different)
# tiny / base / small / medium / large
#Model=base

# Use Whisper for voice commands (open/close/dialogue + powers/spells/weapons/potions).
# Whisper is used only for dialogue selection by default, other features use vosk and it will slightly increase ram usage if they enabled.
# If you want to use whisper for all voice recognition (including shouts and commands) uncomment this line. 
# Shouts strictly always use Vosk.
#VoiceCommandsWhisper=true

# Beam search width (default: 5)
# Higher BeamSize may improve accuracy, but increases latency and CPU/GPU usage.
# Recommended: leave this commented (use the default). Only tweak if you know you need it.
#BeamSize=5

# Process audio from memory (default: 1)
# 0 = via temp WAV on disk
# 1 = in-memory (faster, no WAV files, uses more RAM)
InMemAudio=1


[Mode]
# Microphone capture mode (default: vad)
# - vad : Voice Activity Detection (automatic start/stop based on speech).
# - ptt : Push-To-Talk (keyboard hotkey). If you're using mod in Skyrim SE/AE and want manual voice capture instead of auto-detection.
Mode=vad

# By default uses system default input device. If you want change it - run check_audio_device.bat to print all input (recording) devices to see their indexes.
# then uncomment and set the device index.
#SetMic=

[PTT]
# Hotkey for Push-To-Talk mode (only used when Mode=ptt)
#Hotkey=f2

# How many seconds to record after pressing the hotkey (default: 3.0)
#Seconds=3.0


[VAD]
# Threshold (0.0–1.0): speech probability required to count as speech.
# Increase if you get false triggers from noise. Decrease if it misses quiet speech. (default: 0.30)
Threshold=0.30

# StartMs: continuous speech needed to START recording (ms).
# Increase if it false triggers from breath/noise. Decrease if it cuts off the beginning of words. (default: 50)
StartMs=50

# EndSilenceMs: silence needed to STOP recording (ms).
# Increase if it stops too early during short pauses. Decrease if there’s too much delay until trigger. (default: 350)
EndSilenceMs=350

# MaxUttSec: maximum utterance length (seconds).
# Increase for longer commands. Decrease if it captures extra speech/noise or you want faster processing. (default: 4.5)
MaxUttSec=4.5

# MinUttSec: minimum utterance length (seconds).
# Increase to ignore very short noises. Decrease if short commands are being discarded. (default: 0.1)
MinUttSec=0.1


[Matching]
# MinScore (0.0–1.0): minimum confidence to accept the best match.
# Increase to avoid wrong dialogue picks when recognition is messy.
# Decrease if correct lines are often rejected (no selection) due to low confidence. (default: 0.50)
MinScore=0.50

# MinDiff: minimum gap between the best and 2nd best match.
# Increase to require clearer “winner” when several dialogue lines sound similar (reduces wrong picks).
# Decrease if it often refuses to choose because top options are too close (common with similar phrases). (default: 0.12)
MinDiff=0.12


[Open]
# Phrases to open/start voice dialogue control (comma-separated).
# Uncomment OpenPhrases and set or use preset examples below.
# If you use a different language model, replace this list with your own phrases in that language.

#OpenPhrases=Hello, Greetings, Good day, Excuse me, A moment of your time, Can we talk, I need to ask you something, I have a question, Could you help me, Do you have a minute, You there, Hey
#OpenPhrases=здравствуй, привет, добрый день, слушай, постой, минутку, есть разговор, нужно поговорить

# Required match score for phrase triggers (0.0–1.0) (default: 0.8)
# This threshold affects BOTH Open (open) phrases and Close phrases.
ScoreThreshold=0.8

# Maximum recording length for a open phrase (seconds) (default: 1.5)
MaxRecordSec=1.5

# Silence after the open phrase required to stop recording (ms) (default: 250)
VadEndSilenceMs=250


[Close]
# Phrases/words to close/stop voice dialogue control (comma-separated).
# Uncomment ClosePhrases and set or use preset examples below.
# If you use a different language model, replace this list with your own phrases in that language.

#ClosePhrases=Goodbye, Farewell, Be seeing you, Until next time, That’s all, That’s all I needed, Never mind, Forget it, I’ll be on my way, I should go, Safe travels, Stay safe
#ClosePhrases=до свидания, мне пора, я пойду, хватит разговоров, поговорим позже, пока, до встречи


[Shouts]
# Shouts use Vosk only (even if Engine=whisper). This won’t replace your main ASR engine —
# it just loads a Vosk model when Shout recognition is active.
# Supported Shout models: vosk-model-small-en-us-0.15, vosk-model-small-ru-0.22
# Optional grammar file (already configured, edit if you have problems with some shouts): "DVCRuntime\shout_grammar.json"
# You can add grammar manually for your language if en/ru don't work well for your language/accent, allowed prefixes: en, ru, fr, it, de, es, pl, cn, ja (case-insensitive) in shout_grammar.json.
# After this set model name for your lang from here https://alphacephei.com/vosk/models
# Default is English US. Uncomment and set Model / Language if you want to change it.

#Model=vosk-model-small-en-us-0.15
#Language=en